{% extends 'core/page.html' %}
{% load i18n core_tags %}

{% block headline %}

<h2>{% trans 'Questions' %}</h2>

{% endblock %}

{% block sidebar %}

    <h3>{% trans 'Options' %}</h3>

    <ul class="list-unstyled">
        <li>{% internal_link _('Create new section') 'section_create' %}</li>
        <li>{% internal_link _('Create new subsection') 'subsection_create' %}</li>
        <li>{% internal_link _('Create new group') 'group_create' %}</li>
        <li>{% internal_link _('Create new question') 'question_create' %}</li>
    </ul>
    <ul class="list-unstyled">
        <li>{% internal_link _('Graphical overview') 'questions_sequence' %}</li>
    </ul>

{% endblock %}

{% block page %}

{% for section in sections %}

    <div class="panel panel-default section-panel">
        <div class="panel-heading">
            <strong>{% trans 'Section' %}</strong> {{ section.title }}
            <div class="pull-right">
                <code>{{ section.slug }}</code>
                <a href="{% url 'section_update' section.pk %}" class="small glyphicon glyphicon-pencil"></a>
                <a href="{% url 'section_delete' section.pk %}" class="small glyphicon glyphicon-trash"></a>
            </div>
        </div>
    </div>

{% for subsection in section.subsections.all %}

    <div class="panel panel-default subsection-panel">
        <div class="panel-heading">
            <strong>{% trans 'Subsection' %}</strong> {{ subsection.title }}
            <div class="pull-right">
                <code>{{ subsection.slug }}</code>
                <a href="{% url 'subsection_update' subsection.pk %}" class="small glyphicon glyphicon-pencil"></a>
                <a href="{% url 'subsection_delete' subsection.pk %}" class="small glyphicon glyphicon-trash"></a>
            </div>
        </div>
    </div>

{% for group in subsection.groups.all %}

    <div class="panel panel-default group-panel">
        <div class="panel-heading">
            <strong>{% trans 'Group' %}</strong> {{ group.title }}
            <div class="pull-right">
                <code>{{ group.slug }}</code>
                <a href="{% url 'group_update' group.pk %}" class="small glyphicon glyphicon-pencil"></a>
                <a href="{% url 'group_delete' group.pk %}" class="small glyphicon glyphicon-trash"></a>
            </div>
        </div>

        <table class="table">
            <thead>
                <tr>
                    <th style="width: 60%;">Question</th>
                    <th style="width: 20%;">Slug</th>
                    <th style="width: 10%;">Type</th>
                    <th style="width: 10%;"></th>
                </tr>
            </thead>
            <tbody>
            {% for question in group.questions.all %}
                <tr>
                    <td>{{ question.text }}</td>
                    <td><code>{{ question.slug }}</code></td>
                    <td>{{ question.answer_type }}</td>
                    <td style="text-align: right;">
                        <a href="{% url 'question_update' question.pk %}" class="small glyphicon glyphicon-pencil"></a>
                        <a href="{% url 'question_delete' question.pk %}" class="small glyphicon glyphicon-trash"></a>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>

{% endfor %}

{% endfor %}

{% endfor %}

{% endblock %}
