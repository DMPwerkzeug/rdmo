{% extends 'core/page.html' %}
{% load i18n core_tags %}

{% block headline %}

<h2>{% trans 'Questions' %}</h2>

{% endblock %}

{% block sidebar %}

    <h3>{% trans 'Options' %}</h3>

    <ul class="list-unstyled">
        <li>{% internal_link _('Create new section') 'section_create' %}</li>
        <li>{% internal_link _('Create new subsection') 'subsection_create' %}</li>
        <li>{% internal_link _('Create new group') 'group_create' %}</li>
        <li>{% internal_link _('Create new question') 'question_create' %}</li>
    </ul>
    <ul class="list-unstyled">
        <li>{% internal_link _('Graphical overview') 'questions_sequence' %}</li>
    </ul>

{% endblock %}

{% block page %}

{% for section in sections %}

    <div class="panel panel-default section-panel">
        <div class="panel-heading">
            <strong>{% trans 'Section' %}</strong> {{ section.title }}
            <div class="pull-right">
                <code>{{ section.slug }}</code>
                <a href="{% url 'section_create_subsection' section.pk %}" class="small glyphicon glyphicon-plus"></a>
                <a href="{% url 'section_update' section.pk %}" class="small glyphicon glyphicon-pencil"></a>
                <a href="{% url 'section_delete' section.pk %}" class="small glyphicon glyphicon-trash"></a>
            </div>
        </div>
    </div>

{% for subsection in section.subsections.all %}

    <div class="panel panel-default subsection-panel">
        <div class="panel-heading">
            <strong>{% trans 'Subsection' %}</strong> {{ subsection.title }}
            <div class="pull-right">
                <code>{{ subsection.slug }}</code>
                <a href="{% url 'subsection_create_group' subsection.pk %}" class="small glyphicon glyphicon-plus"></a>
                <a href="{% url 'subsection_update' subsection.pk %}" class="small glyphicon glyphicon-pencil"></a>
                <a href="{% url 'subsection_delete' subsection.pk %}" class="small glyphicon glyphicon-trash"></a>
            </div>
        </div>
    </div>

{% for group in subsection.groups.all %}

    <div class="panel panel-default group-panel">
        <div class="panel-heading">
            <strong>{% trans 'Group' %}</strong> {{ group.title }}
            <div class="pull-right">
                <code>{{ group.slug }}</code>
                <a href="{% url 'group_create_question' group.pk %}" class="small glyphicon glyphicon-plus"></a>
                <a href="{% url 'group_update' group.pk %}" class="small glyphicon glyphicon-pencil"></a>
                <a href="{% url 'group_delete' group.pk %}" class="small glyphicon glyphicon-trash"></a>
            </div>
        </div>

        <ul class="list-group">
            {% for question in group.questions.all %}
            <li class="list-group-item">
                <span>{{ question.text }}</span>
                <div class="pull-right">
                    <code>{{ question.slug }}</code>
                    <a href="{% url 'question_update' question.pk %}" class="small glyphicon glyphicon-pencil"></a>
                    <a href="{% url 'question_delete' question.pk %}" class="small glyphicon glyphicon-trash"></a>
                </div>
            </li>
            {% endfor %}
        </ul>

    </div>

{% endfor %}

{% endfor %}

{% endfor %}

{% endblock %}
